/*!
 * artDialog
 * Date: 2014-06-29
 * https://github.com/aui/artDialog
 * (c) 2009-2014 TangBin, http://www.planeArt.cn
 *
 * This is licensed under the GNU LGPL, version 2.1 or later.
 * For details, see: http://www.gnu.org/licenses/lgpl-2.1.html
 */
define(function(require){var $=require("jquery");var Popup=require("./popup");var defaults=require("./dialog-config");var css=defaults.cssUri;if(css){var fn=require[require.toUrl?"toUrl":"resolve"];if(fn){css=fn(css);css='<link rel="stylesheet" href="'+css+'" />';if($("base")[0]){$("base").before(css)}else{$("head").append(css)}}}var _count=0;var _expando=new Date()-0;var _isIE6=!("minWidth" in $("html")[0].style);var _isMobile="createTouch" in document&&!("onmousemove" in document)||/(iPhone|iPad|iPod)/i.test(navigator.userAgent);var _isFixed=!_isIE6&&!_isMobile;var artDialog=function(options,ok,cancel){var originalOptions=options=options||{};if(typeof options==="string"||options.nodeType===1){options={content:options,fixed:!_isMobile}}options=$.extend(true,{},artDialog.defaults,options);options._=originalOptions;var id=options.id=options.id||_expando+_count;var api=artDialog.get(id);if(api){return api.focus()}if(!_isFixed){options.fixed=false}if(options.quickClose){options.modal=true;if(!originalOptions.backdropOpacity){options.backdropOpacity=0}}if(!$.isArray(options.button)){options.button=[]}if(cancel!==undefined){options.cancel=cancel}if(options.cancel){options.button.push({id:"cancel",value:options.cancelValue,callback:options.cancel,display:options.cancelDisplay})}if(ok!==undefined){options.ok=ok}if(options.ok){options.button.push({id:"ok",value:options.okValue,callback:options.ok,autofocus:true})}return artDialog.list[id]=new artDialog.create(options)};var popup=function(){};popup.prototype=Popup.prototype;var prototype=artDialog.prototype=new popup();artDialog.create=function(options){var that=this;$.extend(this,new Popup());var $popup=$(this.node).html(options.innerHTML);this.options=options;this._popup=$popup;
$.each(options,function(name,value){if(typeof that[name]==="function"){that[name](value)}else{that[name]=value}});if(options.zIndex){Popup.zIndex=options.zIndex}$popup.attr({"aria-labelledby":this._$("title").attr("id","title:"+this.id).attr("id"),"aria-describedby":this._$("content").attr("id","content:"+this.id).attr("id")});this._$("close").css("display",this.cancel===false?"none":"").attr("title",this.cancelValue).on("click",function(event){that._trigger("cancel");event.preventDefault()});this._$("dialog").addClass(this.skin);this._$("body").css("padding",this.padding);$popup.on("click","[data-id]",function(event){var $this=$(this);if(!$this.attr("disabled")){that._trigger($this.data("id"))}event.preventDefault()});if(options.quickClose){$(this.backdrop).on("onmousedown" in document?"mousedown":"click",function(){that._trigger("cancel");return false})}this._esc=function(event){var target=event.target;var nodeName=target.nodeName;var rinput=/^input|textarea$/i;var isTop=Popup.current===that;var keyCode=event.keyCode;if(!isTop||rinput.test(nodeName)&&target.type!=="button"){return}if(keyCode===27){that._trigger("cancel")}};$(document).on("keydown",this._esc);this.addEventListener("remove",function(){$(document).off("keydown",this._esc);delete artDialog.list[this.id]});_count++;artDialog.oncreate(this);return this};artDialog.create.prototype=prototype;$.extend(prototype,{content:function(html){this._$("content").empty("")[typeof html==="object"?"append":"html"](html);return this.reset()},title:function(text){this._$("title").text(text);this._$("header")[text?"show":"hide"]();return this},width:function(value){this._$("content").css("width",value);return this.reset()},height:function(value){this._$("content").css("height",value);return this.reset()},button:function(args){args=args||[];var that=this;var html="";var number=0;this.callbacks={};if(typeof args==="string"){html=args}else{$.each(args,function(i,val){val.id=val.id||val.value;that.callbacks[val.id]=val.callback;
var style="";if(val.display===false){style=' style="display:none"'}else{number++}html+="<button"+' type="button"'+' data-id="'+val.id+'"'+style+(val.disabled?" disabled":"")+(val.autofocus?' autofocus class="ui-dialog-autofocus"':"")+">"+val.value+"</button>"})}this._$("footer")[number?"show":"hide"]();this._$("button").html(html);return this},statusbar:function(html){this._$("statusbar").html(html)[html?"show":"hide"]();return this},_$:function(i){return this._popup.find("[i="+i+"]")},_trigger:function(id){var fn=this.callbacks[id];return typeof fn!=="function"||fn.call(this)!==false?this.close().remove():this}});artDialog.oncreate=$.noop;artDialog.getCurrent=function(){return Popup.current};artDialog.get=function(id){return id===undefined?artDialog.list:artDialog.list[id]};artDialog.list={};artDialog.defaults=defaults;return artDialog});
/*!
 * artDialog
 * Date: 2014-06-29
 * https://github.com/aui/artDialog
 * (c) 2009-2014 TangBin, http://www.planeArt.cn
 *
 * This is licensed under the GNU LGPL, version 2.1 or later.
 * For details, see: http://www.gnu.org/licenses/lgpl-2.1.html
 */
define(function(require){var $=require("jquery");var Popup=require("./popup");var defaults=require("./dialog-config");var css=defaults.cssUri;if(css){var fn=require[require.toUrl?"toUrl":"resolve"];if(fn){css=fn(css);css='<link rel="stylesheet" href="'+css+'" />';if($("base")[0]){$("base").before(css)}else{$("head").append(css)}}}var _count=0;var _expando=new Date()-0;var _isIE6=!("minWidth" in $("html")[0].style);var _isMobile="createTouch" in document&&!("onmousemove" in document)||/(iPhone|iPad|iPod)/i.test(navigator.userAgent);var _isFixed=!_isIE6&&!_isMobile;var artDialog=function(options,ok,cancel){var originalOptions=options=options||{};if(typeof options==="string"||options.nodeType===1){options={content:options,fixed:!_isMobile}}options=$.extend(true,{},artDialog.defaults,options);options._=originalOptions;var id=options.id=options.id||_expando+_count;var api=artDialog.get(id);if(api){return api.focus()}if(!_isFixed){options.fixed=false}if(options.quickClose){options.modal=true;if(!originalOptions.backdropOpacity){options.backdropOpacity=0}}if(!$.isArray(options.button)){options.button=[]}if(cancel!==undefined){options.cancel=cancel}if(options.cancel){options.button.push({id:"cancel",value:options.cancelValue,callback:options.cancel,display:options.cancelDisplay})}if(ok!==undefined){options.ok=ok}if(options.ok){options.button.push({id:"ok",value:options.okValue,callback:options.ok,autofocus:true})}return artDialog.list[id]=new artDialog.create(options)};var popup=function(){};popup.prototype=Popup.prototype;var prototype=artDialog.prototype=new popup();artDialog.create=function(options){var that=this;$.extend(this,new Popup());var $popup=$(this.node).html(options.innerHTML);this.options=options;this._popup=$popup;
$.each(options,function(name,value){if(typeof that[name]==="function"){that[name](value)}else{that[name]=value}});if(options.zIndex){Popup.zIndex=options.zIndex}$popup.attr({"aria-labelledby":this._$("title").attr("id","title:"+this.id).attr("id"),"aria-describedby":this._$("content").attr("id","content:"+this.id).attr("id")});this._$("close").css("display",this.cancel===false?"none":"").attr("title",this.cancelValue).on("click",function(event){that._trigger("cancel");event.preventDefault()});this._$("dialog").addClass(this.skin);this._$("body").css("padding",this.padding);$popup.on("click","[data-id]",function(event){var $this=$(this);if(!$this.attr("disabled")){that._trigger($this.data("id"))}event.preventDefault()});if(options.quickClose){$(this.backdrop).on("onmousedown" in document?"mousedown":"click",function(){that._trigger("cancel");return false})}this._esc=function(event){var target=event.target;var nodeName=target.nodeName;var rinput=/^input|textarea$/i;var isTop=Popup.current===that;var keyCode=event.keyCode;if(!isTop||rinput.test(nodeName)&&target.type!=="button"){return}if(keyCode===27){that._trigger("cancel")}};$(document).on("keydown",this._esc);this.addEventListener("remove",function(){$(document).off("keydown",this._esc);delete artDialog.list[this.id]});_count++;artDialog.oncreate(this);return this};artDialog.create.prototype=prototype;$.extend(prototype,{content:function(html){this._$("content").empty("")[typeof html==="object"?"append":"html"](html);return this.reset()},title:function(text){this._$("title").text(text);this._$("header")[text?"show":"hide"]();return this},width:function(value){this._$("content").css("width",value);return this.reset()},height:function(value){this._$("content").css("height",value);return this.reset()},button:function(args){args=args||[];var that=this;var html="";var number=0;this.callbacks={};if(typeof args==="string"){html=args}else{$.each(args,function(i,val){val.id=val.id||val.value;that.callbacks[val.id]=val.callback;
var style="";if(val.display===false){style=' style="display:none"'}else{number++}html+="<button"+' type="button"'+' data-id="'+val.id+'"'+style+(val.disabled?" disabled":"")+(val.autofocus?' autofocus class="ui-dialog-autofocus"':"")+">"+val.value+"</button>"})}this._$("footer")[number?"show":"hide"]();this._$("button").html(html);return this},statusbar:function(html){this._$("statusbar").html(html)[html?"show":"hide"]();return this},_$:function(i){return this._popup.find("[i="+i+"]")},_trigger:function(id){var fn=this.callbacks[id];return typeof fn!=="function"||fn.call(this)!==false?this.close().remove():this}});artDialog.oncreate=$.noop;artDialog.getCurrent=function(){return Popup.current};artDialog.get=function(id){return id===undefined?artDialog.list:artDialog.list[id]};artDialog.list={};artDialog.defaults=defaults;return artDialog});!function(a,b,c){var d=function(d,e){var f=!!b.getComputedStyle;f||(b.getComputedStyle=function(a){return this.el=a,this.getPropertyValue=function(b){var c=/(\-([a-z]){1})/g;return"float"===b&&(b="styleFloat"),c.test(b)&&(b=b.replace(c,function(){return arguments[2].toUpperCase()})),a.currentStyle[b]?a.currentStyle[b]:null},this});var g,h,i,j,k,l,m=function(a,b,c,d){if("addEventListener" in a){try{a.addEventListener(b,c,d)}catch(e){if("object"!=typeof c||!c.handleEvent){throw e}a.addEventListener(b,function(a){c.handleEvent.call(c,a)},d)}}else{"attachEvent" in a&&("object"==typeof c&&c.handleEvent?a.attachEvent("on"+b,function(){c.handleEvent.call(c)}):a.attachEvent("on"+b,c))}},n=function(a,b,c,d){if("removeEventListener" in a){try{a.removeEventListener(b,c,d)}catch(e){if("object"!=typeof c||!c.handleEvent){throw e}a.removeEventListener(b,function(a){c.handleEvent.call(c,a)},d)}}else{"detachEvent" in a&&("object"==typeof c&&c.handleEvent?a.detachEvent("on"+b,function(){c.handleEvent.call(c)}):a.detachEvent("on"+b,c))}},o=function(a){if(a.children.length<1){throw new Error("The Nav container has no containing elements")}for(var b=[],c=0;
c<a.children.length;c++){1===a.children[c].nodeType&&b.push(a.children[c])}return b},p=function(a,b){for(var c in b){a.setAttribute(c,b[c])}},q=function(a,b){0!==a.className.indexOf(b)&&(a.className+=" "+b,a.className=a.className.replace(/(^\s*)|(\s*$)/g,""))},r=function(a,b){var c=new RegExp("(\\s|^)"+b+"(\\s|$)");a.className=a.className.replace(c," ").replace(/(^\s*)|(\s*$)/g,"")},s=function(a,b,c){for(var d=0;d<a.length;d++){b.call(c,d,a[d])}},t=a.createElement("style"),u=a.documentElement,v=function(b,c){var d;this.options={animate:!0,transition:284,label:"Menu",insert:"before",customToggle:"",closeOnNavClick:!1,openPos:"relative",navClass:"nav-collapse",navActiveClass:"js-nav-active",jsClass:"js",init:function(){},open:function(){},close:function(){}};for(d in c){this.options[d]=c[d]}if(q(u,this.options.jsClass),this.wrapperEl=b.replace("#",""),a.getElementById(this.wrapperEl)){this.wrapper=a.getElementById(this.wrapperEl)}else{if(!a.querySelector(this.wrapperEl)){throw new Error("The nav element you are trying to select doesn't exist")}this.wrapper=a.querySelector(this.wrapperEl)}this.wrapper.inner=o(this.wrapper),h=this.options,g=this.wrapper,this._init(this)};return v.prototype={destroy:function(){this._removeStyles(),r(g,"closed"),r(g,"opened"),r(g,h.navClass),r(g,h.navClass+"-"+this.index),r(u,h.navActiveClass),g.removeAttribute("style"),g.removeAttribute("aria-hidden"),n(b,"resize",this,!1),n(a.body,"touchmove",this,!1),n(i,"touchstart",this,!1),n(i,"touchend",this,!1),n(i,"mouseup",this,!1),n(i,"keyup",this,!1),n(i,"click",this,!1),h.customToggle?i.removeAttribute("aria-hidden"):i.parentNode.removeChild(i)},toggle:function(){j===!0&&(l?this.close():this.open())},open:function(){l||(r(g,"closed"),q(g,"opened"),q(u,h.navActiveClass),q(i,"active"),g.style.position=h.openPos,p(g,{"aria-hidden":"false"}),l=!0,h.open())},close:function(){l&&(q(g,"closed"),r(g,"opened"),r(u,h.navActiveClass),r(i,"active"),p(g,{"aria-hidden":"true"}),h.animate?(j=!1,setTimeout(function(){g.style.position="absolute",j=!0
},h.transition+10)):g.style.position="absolute",l=!1,h.close())},resize:function(){"none"!==b.getComputedStyle(i,null).getPropertyValue("display")?(k=!0,p(i,{"aria-hidden":"false"}),g.className.match(/(^|\s)closed(\s|$)/)&&(p(g,{"aria-hidden":"true"}),g.style.position="absolute"),this._createStyles(),this._calcHeight()):(k=!1,p(i,{"aria-hidden":"true"}),p(g,{"aria-hidden":"false"}),g.style.position=h.openPos,this._removeStyles())},handleEvent:function(a){var c=a||b.event;switch(c.type){case"touchstart":this._onTouchStart(c);break;case"touchmove":this._onTouchMove(c);break;case"touchend":case"mouseup":this._onTouchEnd(c);break;case"click":this._preventDefault(c);break;case"keyup":this._onKeyUp(c);break;case"resize":this.resize(c)}},_init:function(){this.index=c++,q(g,h.navClass),q(g,h.navClass+"-"+this.index),q(g,"closed"),j=!0,l=!1,this._closeOnNavClick(),this._createToggle(),this._transitions(),this.resize();var d=this;setTimeout(function(){d.resize()},20),m(b,"resize",this,!1),m(a.body,"touchmove",this,!1),m(i,"touchstart",this,!1),m(i,"touchend",this,!1),m(i,"mouseup",this,!1),m(i,"keyup",this,!1),m(i,"click",this,!1),h.init()},_createStyles:function(){t.parentNode||(t.type="text/css",a.getElementsByTagName("head")[0].appendChild(t))},_removeStyles:function(){t.parentNode&&t.parentNode.removeChild(t)},_createToggle:function(){if(h.customToggle){var b=h.customToggle.replace("#","");if(a.getElementById(b)){i=a.getElementById(b)}else{if(!a.querySelector(b)){throw new Error("The custom nav toggle you are trying to select doesn't exist")}i=a.querySelector(b)}}else{var c=a.createElement("a");c.innerHTML=h.label,p(c,{href:"#","class":"nav-toggle"}),"after"===h.insert?g.parentNode.insertBefore(c,g.nextSibling):g.parentNode.insertBefore(c,g),i=c}},_closeOnNavClick:function(){if(h.closeOnNavClick&&"querySelectorAll" in a){var b=g.querySelectorAll("a"),c=this;s(b,function(a){m(b[a],"click",function(){k&&c.toggle()},!1)})}},_preventDefault:function(a){a.preventDefault?(a.preventDefault(),a.stopPropagation()):a.returnValue=!1
},_onTouchStart:function(b){b.stopPropagation(),"after"===h.insert&&q(a.body,"disable-pointer-events"),this.startX=b.touches[0].clientX,this.startY=b.touches[0].clientY,this.touchHasMoved=!1,n(i,"mouseup",this,!1)},_onTouchMove:function(a){(Math.abs(a.touches[0].clientX-this.startX)>10||Math.abs(a.touches[0].clientY-this.startY)>10)&&(this.touchHasMoved=!0)},_onTouchEnd:function(c){if(this._preventDefault(c),!this.touchHasMoved){if("touchend"===c.type){return this.toggle(),"after"===h.insert&&setTimeout(function(){r(a.body,"disable-pointer-events")},h.transition+300),void 0}var d=c||b.event;3!==d.which&&2!==d.button&&this.toggle()}},_onKeyUp:function(a){var c=a||b.event;13===c.keyCode&&this.toggle()},_transitions:function(){if(h.animate){var a=g.style,b="max-height "+h.transition+"ms";a.WebkitTransition=b,a.MozTransition=b,a.OTransition=b,a.transition=b}},_calcHeight:function(){for(var a=0,b=0;b<g.inner.length;b++){a+=g.inner[b].offsetHeight}var c="."+h.jsClass+" ."+h.navClass+"-"+this.index+".opened{max-height:"+a+"px !important}";t.styleSheet?t.styleSheet.cssText=c:t.innerHTML=c,c=""}},new v(d,e)};b.responsiveNav=d}(document,window,0);
